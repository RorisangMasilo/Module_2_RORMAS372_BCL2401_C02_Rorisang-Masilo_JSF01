<!-- Alpine.js Shop Component -->
<script>
    function filterComponent() {
        return {
            categories: [],
            filterItem: 'All categories',
            searchTerm: '',
            dropdownOpen: false,
            async initializeCategories() {
                try {
                    const response = await fetch('https://api.example.com/categories');
                    const data = await response.json();
                    this.categories = data;
                    // Fetch products or other initializations if needed
                } catch (error) {
                    console.error('Error fetching categories:', error);
                }
            },
            toggleDropdown() {
                this.dropdownOpen = !this.dropdownOpen;
            },
            handleFilter(category) {
                this.filterItem = category;
                this.dropdownOpen = false;
                // Call fetchProducts or filter logic here
            },
            handleSearch(event) {
                this.searchTerm = event.target.value;
                // Call searchProducts or filtering logic here
            }
        };
    }
    function shop() {
        return {
            products: [],
            sorting: 'default',
            init() {
                this.fetchProducts();
            },
            async fetchProducts() {
                const response = await fetch('https://fakestoreapi.com/products');
                this.products = await response.json();
            },
            get sortedProducts() {
                if (this.sorting !== 'default') {
                    this.products.sort((a, b) =>
                        this.sorting === 'low' ? a.price - b.price : b.price - a.price
                    );
                } else {
                    this.products = JSON.parse(JSON.stringify(this.originalProducts));
                }
            },

            searchProducts() {
                if (this.searchTerm.trim() !== '') {
                    this.products = this.originalProducts.filter(product =>
                        product.title.toLowerCase().includes(this.searchTerm.toLowerCase()));
                } else {
                    this.products = JSON.parse(JSON.stringify(this.originalProducts));
                }
            },

            function ratings({ rate, count }) {
            return {
                yellowStars: Array(Math.floor(rate)).fill(0),
                blankStars: Array(5 - Math.floor(rate)).fill(0),
            }
        }
    }
</script>
</body>

</html>